<html>
<head>
    <title>Перетягування квадрата</title>
    <style>
        #container {
            position: relative;
            width: 500px;
            height: 500px;
            background-color: lightgray;
            border: 2px solid black;
        }
        #kv {
            position: absolute;
            left: 50px;
            top: 50px;
            width: 50px;
            height: 50px;
            background-color: red;
            cursor: pointer;
        }
    </style>
    <script>
        let flag = false;

        function init() {
            let kv = document.getElementById("kv");
            kv.onmousedown = zachvat;
            kv.onmouseup = osvobodi;
            kv.onmousemove = dragIt;
        }

        function zachvat() {
            flag = true;
        }

        function osvobodi() {
            flag = false;
        }

        function dragIt(evt) {
            evt = evt || window.event;
            if (flag) {
                let container = document.getElementById("container");
                let kv = document.getElementById("kv");

                let newTop = evt.clientY - container.offsetTop - 25;
                let newLeft = evt.clientX - container.offsetLeft - 25;

                // обмеження руху всередині контейнера
                if (newTop < 0) newTop = 0;
                if (newLeft < 0) newLeft = 0;
                if (newTop > container.clientHeight - kv.offsetHeight)
                    newTop = container.clientHeight - kv.offsetHeight;
                if (newLeft > container.clientWidth - kv.offsetWidth)
                    newLeft = container.clientWidth - kv.offsetWidth;

                kv.style.top = newTop + "px";
                kv.style.left = newLeft + "px";
            }
        }
    </script>
</head>
<body onload="init()">
<h2>Перетягування квадрата мишкою</h2>
<div id="container">
    <div id="kv"></div>
</div>
</body>
</html>